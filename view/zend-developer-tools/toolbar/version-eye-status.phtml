<?php
/* @var $collector \VersionEyeModule\Collector\DependencyStatusCollector */

$statuses = $collector->getCollectedDependencyStatuses();
if ( ! $statuses) {
?>
<div class="zdt-toolbar-entry">
    <div class="zdt-toolbar-preview">
        <!-- alert icon? API key link? -->
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3AwOFjIRE2xHhwAAAvZJREFUSMedlF9oVnUYxz/P77zzzRmruYELGhh48Qor3026sOlFUFHrQmMuvXAQZrS9r+DawkVSeCPsItmibbB3zMKSFBGLJcIuhnazaM2tZjRRr15LcP3BomKdc35PFxs7O2fnde92Lp/z/D6/7/N9nt8jRD7NPF3l4w0BO0CnHJFj0jc5RpGfiQZ8vB6gASgHedZX+drNpJ9ZM1BhWySSEGTEzaafXxNQ0NGYvA2iMuy1pvesGugk3feAWzG5SUTOetn07tUp7P7xd2d2Swo4FQtVueBlal8vGggg58/71nF6VfkGxIsWAeS8bPpQ7NllTTm8PeX7tgfhhbj/ocPCgNM32VIQuFDKR8D64oZEVeCM0z/VvKxkP5M+AgwuhUl1CtPSg2nsgMS6WI2KHPBbaztDCt3M9p2CvbLgT2Dw258gTzw1ryU/gz35Grj/xUm1in2ppP/7EaMgYHNRGAB//UFI7cEuSJQUaK7p1aYmR9xM3YuCXo616JFKTPsQUlkduPbTGHagHdy5OEtfNYLuLej5/V+xJ/ajN8YDpVt3YFq6oSQZo1P2iJ+pm1a0Zn5sS5HnmpGKx+H+bJC4fgNS3wgmGFvNz2C734C5v5cif0ko+tjiBa+0Ibv2FjUwUp3C7OvEnn5/aXiTCTUjfFsRY2iXhRICeYVHAexwP/LzbSh9GP78LcgqLcM0tsO6YN71zgz2XFeUdy+hwjTKk/NPxUW//SqcUlaB0zYYhk2NYk+9A370mcs1g8qFgiVtrMIc/RQ2bQ5g45exQ0djYAD2S+N4MgzkY6d137tIeVUA++Eq9rPjYG1c+l3Hc84YyU24qLbGKizbGMBufocd7ADPLdAgOSa5iX8Wt42bre0SpTPkyOYapOFNmM1jv/gw/nUAiH6c6Js6GFpfCuJlaz8Q5a2V9mAElnNc57DkJtzYBetl0w2qclIgtQIqD3Qm+ic/f+DGBtDjGP9e3cugDQL1CpUISVHuqHAd5aKTfOiSdI/9Gz37P6crCTosFB7sAAAAAElFTkSuQmCC" alt="Doctrine ORM (Mappings)">
        <span class="zdt-toolbar-info">
            No dependencies!
        </span>
    </div>
    <div class="zdt-toolbar-detail">
        <span class="zdt-toolbar-info version-eye-toolbar-info-heading">
            <a href="https://github.com/Ocramius/VersionEyeModule" target="_blank">VersionEyeModule</a>
            <span class="zdt-toolbar-info version-eye-toolbar-info">
                Did you setup and configure the
                <a href="https://www.versioneye.com/settings/api" target="_blank">API key</a> for
                <a href="https://www.versioneye.com/settings/api" target="_blank">VersionEye</a> and set it in
                your configuration?
            </span>
        </span>
    </div>
</div>
<?php
return;
}
?>
<div class="zdt-toolbar-entry">
    <div class="zdt-toolbar-preview">
        <!-- @todo versioneye icon? -->
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3AwOFjIRE2xHhwAAAvZJREFUSMedlF9oVnUYxz/P77zzzRmruYELGhh48Qor3026sOlFUFHrQmMuvXAQZrS9r+DawkVSeCPsItmibbB3zMKSFBGLJcIuhnazaM2tZjRRr15LcP3BomKdc35PFxs7O2fnde92Lp/z/D6/7/N9nt8jRD7NPF3l4w0BO0CnHJFj0jc5RpGfiQZ8vB6gASgHedZX+drNpJ9ZM1BhWySSEGTEzaafXxNQ0NGYvA2iMuy1pvesGugk3feAWzG5SUTOetn07tUp7P7xd2d2Swo4FQtVueBlal8vGggg58/71nF6VfkGxIsWAeS8bPpQ7NllTTm8PeX7tgfhhbj/ocPCgNM32VIQuFDKR8D64oZEVeCM0z/VvKxkP5M+AgwuhUl1CtPSg2nsgMS6WI2KHPBbaztDCt3M9p2CvbLgT2Dw258gTzw1ryU/gz35Grj/xUm1in2ppP/7EaMgYHNRGAB//UFI7cEuSJQUaK7p1aYmR9xM3YuCXo616JFKTPsQUlkduPbTGHagHdy5OEtfNYLuLej5/V+xJ/ajN8YDpVt3YFq6oSQZo1P2iJ+pm1a0Zn5sS5HnmpGKx+H+bJC4fgNS3wgmGFvNz2C734C5v5cif0ko+tjiBa+0Ibv2FjUwUp3C7OvEnn5/aXiTCTUjfFsRY2iXhRICeYVHAexwP/LzbSh9GP78LcgqLcM0tsO6YN71zgz2XFeUdy+hwjTKk/NPxUW//SqcUlaB0zYYhk2NYk+9A370mcs1g8qFgiVtrMIc/RQ2bQ5g45exQ0djYAD2S+N4MgzkY6d137tIeVUA++Eq9rPjYG1c+l3Hc84YyU24qLbGKizbGMBufocd7ADPLdAgOSa5iX8Wt42bre0SpTPkyOYapOFNmM1jv/gw/nUAiH6c6Js6GFpfCuJlaz8Q5a2V9mAElnNc57DkJtzYBetl0w2qclIgtQIqD3Qm+ic/f+DGBtDjGP9e3cugDQL1CpUISVHuqHAd5aKTfOiSdI/9Gz37P6crCTosFB7sAAAAAElFTkSuQmCC" alt="Doctrine ORM (Mappings)">
        <span class="version-eye-toolbar-info">
            <?php echo count($statuses['dependencies']); ?> dependencies
        </span>
    </div>
    <div class="zdt-toolbar-detail">
        <span class="zdt-toolbar-info version-eye-toolbar-info-heading">
            <a href="https://github.com/Ocramius/VersionEyeModule" target="_blank">VersionEyeModule</a>
        </span>
        <span class="zdt-toolbar-info version-eye-toolbar-info">
            <?php foreach ($statuses['dependencies'] as $dependency): ?>
                <hr/>
                <a class="version-eye-package-name" href="https://www.versioneye.com/package/<?php
                    echo $this->escapeHtmlAttr(str_replace('/', '--', $dependency['prod_key']));
                ?>" target="_blank">
                    <?php echo $this->escapeHtml($dependency['name']); ?>
                </a>
                <br/>
                <span class="version-eye-package-version<?php
                    if ($dependency['outdated']) {
                        echo ' version-eye-package-outdated';
                    }
                ?>">
                    <span class="version-eye-package-comparator">
                        <?php echo $this->escapeHtml($dependency['comparator']); ?>
                    </span>
                    <?php echo $this->escapeHtml($dependency['version_requested']); ?>
                </span>
                <?php if ($dependency['outdated']) { ?>
                    <span class="version-eye-package-upgrade">
                        <?php echo $this->escapeHtml($dependency['version_current']); ?>
                    </span>
                <?php } ?>
            <?php endforeach ?>
        </span>
    </div>
</div>
<style>
.version-eye-toolbar-entry .version-eye-toolbar-detail .version-eye-toolbar-info
{
    font-size: 11px;
    max-width: 600px;
    witdh: 600px;
    max-height: 300px;
    overflow-y: scroll;
    overflow-x: hidden;
}

.version-eye-toolbar-entry .version-eye-toolbar-info .version-eye-clear
{
    clear: both;
    display: block;
}

.version-eye-toolbar-info hr
{
    border: 0;
    border-top: 1px solid #ffffff;
    clear: both;
    margin-top: 0px;
    margin-bottom: 0px;
}

a.version-eye-package-name
{
    color: #149bdf;
}

.version-eye-package-comparator
{
    color: #ffffff;
}

.version-eye-package-version
{
    color: #70d900;
}

.version-eye-package-version .version-eye-package-outdated
{
    color: #dd1144;
}

.version-eye-package-upgrade
{
    color: #f89406;
    float: right;
}
</style>
